<% layout('layouts/boilerplate')%>
    <link rel="stylesheet" href="/stylesheets/editing.css">
    <div class="row mt-4">
        <h1 class="text-center">Edit Product</h1>
        <div class="col-6 offset-3">
            <form action="/products/<%=product._id%>?_method=PUT" method="POST" novalidate class="needs-validation"
                enctype="multipart/form-data">
                <div class="mb-3">
                    <label class="form-label" for="title">Product Name</label>
                    <input class="form-control" type="text" id="title" name="product[title]"
                        value="<%= product.title %> " required>
                </div>

                <div class="mb-3">
                    <label for="selec_box">Select Category</label>
                    <select class="form-select mt-2" name="product[categories]" id="select_box"
                        value="<%= product.categories %> ">
                        <option data-subtext="custom">Electronics</option>
                        <option data-subtext="mustard">Food and Beverages</option>
                        <option data-subtext="frosting">Fashion</option>
                        <option data-subtext="more">Mobiles</option>
                        <option data-subtext="more1">Grocery</option>
                        <option data-subtext="more2">Appliances</option>
                        <option data-subtext="more3">Books</option>
                        <option data-subtext="more3">Stationery And Office Supplies</option>
                        <option data-subtext="more3">Auto Accessories</option>
                        <option data-subtext="more3">Safety And Hygiene Essentials</option>
                        <option data-subtext="more3">Grooming</option>
                        <option data-subtext="more3">Sports And Fitness</option>
                    </select>
                </div>

                <div>
                    <label class="form-label">Choose Image(s)</label>
                    <div class="form-file custom-file">
                        <input class="form-control custom-file-input previewMultiple" type="file" id="image"
                            name="image" multiple>
                        <label for="image" class="form-label custom-file-label"></label>
                    </div>
                    <div id="formFile"></div>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="price">Product Price</label>
                    <div class="input-group">
                        <span class="input-group-text" id="price-label">â‚¹</span>
                        <input type="text" class="form-control" id="price" placeholder="0.00" aria-label="price"
                            aria-describedby="price-label" name="product[price]" value="<%= product.price %>" required>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label" for="description">Description</label>
                    <textarea class="form-control" type="text" id="description" name="product[description]"
                        required><%= product.description %> </textarea>
                </div>
                <h5> Delete Images </h5>
                <div class="row row-cols-1 row-cols-md-4 g-4 mb-3">
                    <% product.images.forEach((image, i)=> { %>
                        <div class="col">
                            <div class="card">
                                <img class="card-img" src="<%= image.thumbnail %>" alt="" crossorigin>
                                <div class="card-img-overlay text-end pt-1 pe-2">
                                    <label class="visually-hidden" for="image-<%= i %>">Delete Image</label>
                                    <input class="form-check-input" type="checkbox" name="deleteImages[]"
                                        value="<%= image.filename %>" id="image-<%= i %>">
                                </div>
                            </div>
                        </div>
                        <% }) %>
                </div>
                <div class="mb-3">
                    <button class="btn btn-info">Edit Product</button>
                </div>
            </form>
            <a href="/products">All Products</a>
        </div>
    </div>
    <script src="/javascripts/editing.js"></script>